"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4007],{28722:function(e,t,n){n.d(t,{Dw:function(){return k},eI:function(){return c},x7:function(){return v}});var a,i,r=n(17061),s=n.n(r),p=n(17156),u=n.n(p),y=n(38416),o=n.n(y),l=n(43671),d=n(46495),m=n(58926);function c(e){return new l.f({uri:e,cache:new d.h})}var b="https://api.thegraph.com/subgraphs/name/blex-dex/",T=(a={},o()(a,m.Qz,"avalanche-c-chain"),o()(a,m.PO,"arbitrum"),o()(a,m.N0,"arbitrum-nova"),o()(a,m.bx,"avalanche"),o()(a,m.qF,"arbitrum"),o()(a,m.vA,"fantom"),a),f=(i={},o()(i,m.PO,"https://api.blex.io/arbitrum_42161/subgraph"),o()(i,m.bx,b+T[m.bx]+"_"+m.bx),o()(i,m.qF,b+T[m.qF]+"_"+m.qF),o()(i,m.vA,"https://dev-api.blex.io/subgraphs/name/blex-dex/fantom_4002"),o()(i,m.VC,"https://mumbai.blex.io/subgraphs/name/blex-dex/mumbai_80001"),i),v=function(e){return f[e]},k=function(){var e=u()(s()().mark((function e(t,n){var a,i;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{headers:{"Content-Type":"application/json",Accept:"application/json"},method:"POST",body:JSON.stringify({query:n}),mode:"cors"}).catch((function(e){console.log("err",e)}));case 3:return a=e.sent,e.next=6,null==a?void 0:a.json();case 6:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 10:e.prev=10,e.t0=e.catch(0),console.log("fetchGql error",e.t0);case 13:return e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}()},44637:function(e,t,n){n.d(t,{x:function(){return O}});var a=n(17061),i=n.n(a),r=n(17156),s=n.n(r),p=n(56690),u=n.n(p),y=n(89728),o=n.n(y),l=n(61655),d=n.n(l),m=n(26389),c=n.n(m),b=n(9279),T=JSON.parse('{"Mt":[{"inputs":[{"internalType":"address","name":"_f","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint8","name":"version","type":"uint8"}],"name":"Initialized","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"previousAdminRole","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newAdminRole","type":"bytes32"}],"name":"RoleAdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleRevoked","type":"event"},{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"market","type":"address"},{"internalType":"address","name":"account","type":"address"},{"internalType":"bool","name":"isLong","type":"bool"}],"name":"availableLiquidity","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"fac","outputs":[{"internalType":"contract IMarketFactory","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"address","name":"market","type":"address"},{"internalType":"bool","name":"isLong","type":"bool"}],"name":"getFundingFee","outputs":[{"internalType":"int256","name":"","type":"int256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_market","type":"address"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"getFundingRate","outputs":[{"internalType":"int256","name":"","type":"int256"},{"internalType":"int256","name":"","type":"int256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_marketAddr","type":"address"}],"name":"getMarket","outputs":[{"components":[{"internalType":"uint256","name":"minSlippage","type":"uint256"},{"internalType":"uint256","name":"maxSlippage","type":"uint256"},{"internalType":"uint256","name":"slippageDigits","type":"uint256"},{"internalType":"uint256","name":"minLev","type":"uint256"},{"internalType":"uint256","name":"maxLev","type":"uint256"},{"internalType":"uint256","name":"minCollateral","type":"uint256"},{"internalType":"uint256","name":"maxTradeAmount","type":"uint256"},{"internalType":"bool","name":"allowOpen","type":"bool"},{"internalType":"bool","name":"allowClose","type":"bool"}],"internalType":"struct IMarketReader.ValidOuts","name":"validOuts","type":"tuple"},{"components":[{"internalType":"uint256","name":"tokenDigits","type":"uint256"},{"internalType":"uint256","name":"closeFeeRate","type":"uint256"},{"internalType":"uint256","name":"openFeeRate","type":"uint256"},{"internalType":"uint256","name":"liquidationFeeUsd","type":"uint256"},{"internalType":"uint256","name":"spread","type":"uint256"},{"internalType":"address","name":"indexToken","type":"address"},{"internalType":"address","name":"collateralToken","type":"address"},{"internalType":"address","name":"orderBookLong","type":"address"},{"internalType":"address","name":"orderBookShort","type":"address"},{"internalType":"address","name":"positionBook","type":"address"}],"internalType":"struct IMarketReader.MarketOuts","name":"mktOuts","type":"tuple"},{"components":[{"internalType":"uint256","name":"closeFeeRate","type":"uint256"},{"internalType":"uint256","name":"openFeeRate","type":"uint256"},{"internalType":"uint256","name":"execFee","type":"uint256"},{"internalType":"uint256","name":"liquidateFee","type":"uint256"},{"internalType":"uint256","name":"digits","type":"uint256"}],"internalType":"struct IMarketReader.FeeOuts","name":"feeOuts","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMarkets","outputs":[{"components":[{"internalType":"string","name":"name","type":"string"},{"internalType":"address","name":"addr","type":"address"},{"internalType":"uint256","name":"minPay","type":"uint256"},{"internalType":"bool","name":"allowOpen","type":"bool"},{"internalType":"bool","name":"allowClose","type":"bool"}],"internalType":"struct IMarketFactory.Outs[]","name":"_outs","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"address","name":"market","type":"address"}],"name":"getPositions","outputs":[{"components":[{"internalType":"address","name":"market","type":"address"},{"internalType":"bool","name":"isLong","type":"bool"},{"internalType":"uint32","name":"lastTime","type":"uint32"},{"internalType":"uint216","name":"extra3","type":"uint216"},{"internalType":"uint256","name":"size","type":"uint256"},{"internalType":"uint256","name":"collateral","type":"uint256"},{"internalType":"uint256","name":"averagePrice","type":"uint256"},{"internalType":"int256","name":"entryFundingRate","type":"int256"},{"internalType":"int256","name":"realisedPnl","type":"int256"},{"internalType":"uint256","name":"extra0","type":"uint256"},{"internalType":"uint256","name":"extra1","type":"uint256"},{"internalType":"uint256","name":"extra2","type":"uint256"}],"internalType":"struct Position.Props[]","name":"_positions","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleAdmin","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"}],"name":"grantControllerRoleByMarketManager","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_marketRouter","type":"address"},{"internalType":"address","name":"_vaultRouter","type":"address"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"market","type":"address"},{"internalType":"address","name":"_account","type":"address"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"isLiquidate","outputs":[{"internalType":"uint256","name":"_state","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"marketRouter","outputs":[{"internalType":"contract IMarketRouter","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"}],"name":"transferAdmin","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"vaultRouter","outputs":[{"internalType":"contract IVaultRouter","name":"","type":"address"}],"stateMutability":"view","type":"function"}]}'),f=n(71641),v=n(66115),k=n.n(v),g=n(38416),_=n.n(g),h=JSON.parse('{"Mt":[{"inputs":[{"internalType":"string","name":"_name","type":"string"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"bool","name":"isLong","type":"bool"},{"indexed":false,"internalType":"bool","name":"isIncrease","type":"bool"},{"indexed":false,"internalType":"uint256","name":"orderID","type":"uint256"},{"indexed":false,"internalType":"address","name":"market","type":"address"},{"indexed":false,"internalType":"uint8","name":"reason","type":"uint8"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"}],"name":"DeleteOrder","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"previousAdminRole","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newAdminRole","type":"bytes32"}],"name":"RoleAdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleRevoked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"bool","name":"isLong","type":"bool"},{"indexed":false,"internalType":"bool","name":"isIncrease","type":"bool"},{"indexed":false,"internalType":"uint256","name":"orderID","type":"uint256"},{"indexed":false,"internalType":"address","name":"market","type":"address"},{"indexed":false,"internalType":"uint256","name":"size","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"collateral","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"triggerPrice","type":"uint256"},{"indexed":false,"internalType":"bool","name":"triggerAbove","type":"bool"},{"indexed":false,"internalType":"uint256","name":"tp","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"sl","type":"uint256"}],"name":"UpdateOrder","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"int256","name":"collateralDelta","type":"int256"},{"indexed":false,"internalType":"uint256","name":"sizeDelta","type":"uint256"},{"indexed":false,"internalType":"bool","name":"isLong","type":"bool"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"},{"indexed":false,"internalType":"int256","name":"pnl","type":"int256"},{"components":[{"internalType":"int256","name":"_totoalFees","type":"int256"},{"internalType":"int256","name":"_execFee","type":"int256"},{"internalType":"int256","name":"_fundFee","type":"int256"},{"internalType":"int256","name":"_tradeFee","type":"int256"}],"indexed":false,"internalType":"struct MarketStorage.FeesVars","name":"fees","type":"tuple"},{"indexed":false,"internalType":"address","name":"market","type":"address"},{"indexed":false,"internalType":"address","name":"collateralToken","type":"address"},{"indexed":false,"internalType":"address","name":"indexToken","type":"address"},{"indexed":false,"internalType":"uint256","name":"category","type":"uint256"},{"indexed":false,"internalType":"bool","name":"fromOrder","type":"bool"}],"name":"UpdatePosition","type":"event"},{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ROLE_FACTORY","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ROLE_POS_KEEPER","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bool","name":"_isIncrease","type":"bool"},{"internalType":"uint256","name":"_orderID","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"cancelOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool[]","name":"_isIncreaseList","type":"bool[]"},{"internalType":"uint256[]","name":"_orderIDList","type":"uint256[]"},{"internalType":"bool[]","name":"_isLongList","type":"bool[]"}],"name":"cancelOrderList","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"collateralToken","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bool","name":"","type":"bool"}],"name":"decreaseCollateral","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_isLimit","type":"bool"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"bool","name":"_isKeepLev","type":"bool"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bytes32","name":"refCode","type":"bytes32"}],"name":"decreaseTrade","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_isLimit","type":"bool"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"bool","name":"_isKeepLev","type":"bool"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bytes32","name":"refCode","type":"bytes32"}],"name":"decreaseTrade2","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_orderKey","type":"bytes32"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bool","name":"_isIncrease","type":"bool"}],"name":"execOrderKey","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"feeRouter","outputs":[{"internalType":"contract IFeeRouter","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleAdmin","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_collateralDelta","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"increaseCollateral","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_isLimit","type":"bool"},{"internalType":"uint256","name":"_payDelta","type":"uint256"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_tpPrice","type":"uint256"},{"internalType":"uint256","name":"_slPrice","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bytes32","name":"refCode","type":"bytes32"}],"name":"increaseTrade","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"indexToken","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_positionBook","type":"address"},{"internalType":"contract IOrderBook","name":"_orderBookLong","type":"address"},{"internalType":"contract IOrderBook","name":"_orderBookShort","type":"address"},{"internalType":"address","name":"_addressProvider","type":"address"},{"internalType":"address","name":"_indexToken","type":"address"},{"internalType":"address","name":"_feeRouter","type":"address"},{"internalType":"address","name":"_feeVault","type":"address"},{"internalType":"address","name":"_marketRouter","type":"address"},{"internalType":"address","name":"_vault","type":"address"},{"internalType":"address","name":"_vaultRouter","type":"address"},{"internalType":"address","name":"_collateralToken","type":"address"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_key","type":"bytes32"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"isLiquidate","outputs":[{"internalType":"uint256","name":"_state","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"bool","name":"","type":"bool"}],"name":"liquidatePosition","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32[]","name":"keys","type":"bytes32[]"},{"internalType":"bool","name":"isLong","type":"bool"}],"name":"liquidatePositionByKey","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"market2","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"marketAddressesProvider","outputs":[{"internalType":"contract IMarketAddressesProvider","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"orderBookLong","outputs":[{"internalType":"contract IOrderBook","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"orderBookShort","outputs":[{"internalType":"contract IOrderBook","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"positionBook","outputs":[{"internalType":"contract IPositionBook","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_m","type":"address"}],"name":"setMarket2","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"isLong","type":"bool"},{"internalType":"address","name":"ob","type":"address"}],"name":"setOrderBook","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_r","type":"address"}],"name":"setRef","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_spread","type":"uint256"}],"name":"setSpread","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"spread","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_orderID","type":"uint256"},{"internalType":"uint256","name":"_triggerPrice","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bytes32","name":"refCode","type":"bytes32"}],"name":"updateDecreaseOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_orderID","type":"uint256"},{"internalType":"uint256","name":"_triggerPrice","type":"uint256"},{"internalType":"uint256","name":"_tpPrice","type":"uint256"},{"internalType":"uint256","name":"_slPrice","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bytes32","name":"refCode","type":"bytes32"}],"name":"updateIncreaseOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"vault","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]}'),x=n(24069),M=n(25122),w="0.003",R=function(e){d()(y,e);var t,n,a,r,p=c()(y);function y(e,t,n,a,i,r){var s;return u()(this,y),s=p.call(this,e,t,h.Mt,n),_()(k()(s),"_args",void 0),_()(k()(s),"_valid",void 0),_()(k()(s),"_fee",void 0),_()(k()(s),"_ctoken",void 0),s._args=a,s._valid=i,s._fee=r,s._ctoken=new M.a(e,t,a.collateralToken,void 0),s}return o()(y,[{key:"getClassName",value:function(){return"Market"}},{key:"getCollateralToken",value:function(){return this._ctoken}},{key:"getOpenFeeRate",value:function(){var e;return null!==(e=this.formatFeeOrRate(this._fee.openFeeRate))&&void 0!==e?e:w}},{key:"getCloseFeeRate",value:function(){var e;return null!==(e=this.formatFeeOrRate(this._fee.closeFeeRate))&&void 0!==e?e:w}},{key:"getExecFee",value:function(){return this.formatNum(this._fee.execFee)}},{key:"getCleanFee",value:function(){var e;return this.formatNum(null===(e=this._fee)||void 0===e?void 0:e.liquidateFee)}},{key:"getSlippageDecimals",value:function(e){var t=4;return this._valid.slippageDigits.isZero()||(t=this._valid.slippageDigits.toNumber()),(0,x.H2)(e,t)}},{key:"getFeeDecimals",value:function(e){return(0,x.H2)(e,8)}},{key:"getNumDecimals",value:function(e){var t=18;return this._args.tokenDigits.isZero()||(t=this._args.tokenDigits.toNumber()),(0,x.H2)(e,t)}},{key:"parseNumber",value:function(e,t){return(0,x.H2)(e,t)}},{key:"getPriceDecimals",value:function(e){return(0,x.H2)(e,30)}},{key:"formatPrice",value:function(e){return(0,x.dN)(e,30)}},{key:"getTokenDigits",value:function(){return this._args.tokenDigits.toNumber()}},{key:"formatNum",value:function(e,t,n,a){return(0,x.dN)(e,this._args.tokenDigits.toNumber(),t,n,a)}},{key:"formatFeeOrRate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return(0,x.dN)(e,t)}},{key:"formatPercentage",value:function(e){return(0,x.H2)(e,2)}},{key:"allowance",value:(r=s()(i()().mark((function e(t){var n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCollateralToken().allowance(t,this._address);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"approve",value:(a=s()(i()().mark((function e(t,n,a){var r,s;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new M.a(this._library,this._chainId,this._args.collateralToken,void 0),e.next=3,r.allowance(t,this._address);case 3:if(!e.sent.lt(n)&&!a){e.next=9;break}return s=(0,x._b)(1e3),e.next=8,r.approve(this._address,n.mul(s));case 8:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return a.apply(this,arguments)})},{key:"getCtokenDecimals",value:(n=s()(i()().mark((function e(){var t,n,a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this._ctoken)||void 0===t||null===(n=t._contract)||void 0===n?void 0:n.decimals();case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"formatCToken",value:(t=s()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,x.dN)(t,6));case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),y}(f.k),O=function(e){d()(m,e);var t,n,a,r,p,y,l=c()(m);function m(e,t){return u()(this,m),l.call(this,e,t,T.Mt)}return o()(m,[{key:"getClassName",value:function(){return"MarketReader"}},{key:"getMarket",value:(y=s()(i()().mark((function e(t){var n,a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||console.error("getMarket address is empty"),e.next=3,this.call("getMarket",t);case 3:return n=e.sent,a=new R(this._library,this._chainId,t,n.mktOuts,n.validOuts,n.feeOuts),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"getMarkets",value:(p=s()(i()().mark((function e(){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getMarkets");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"getFundingRate",value:(r=s()(i()().mark((function e(t,n){var a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.call("getFundingRate",t,n);case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),console.error("Error occurred while fetching funding rate:",e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e,t){return r.apply(this,arguments)})},{key:"getFundingFee",value:(a=s()(i()().mark((function e(t,n,a){var r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getFundingFee",t,n,a);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return a.apply(this,arguments)})},{key:"getPositions",value:(n=s()(i()().mark((function e(t,n){var a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getPositions",t,n||b.d);case 2:return null==(a=e.sent)||a.forEach((function(e){e.realisedPnl.mul(e.hasProfit?1:-1)})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"availableLiquidity",value:(t=s()(i()().mark((function e(t,n,a){var r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("availableLiquidity",n,t,a);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,n,a){return t.apply(this,arguments)})}]),m}(f.k)}}]);